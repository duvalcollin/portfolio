<!DOCTYPE html>
<html>

<head>
    <title>Battleship Game</title>
</head>
<style>
    body {
        margin: 60px auto;
        width: 70%;
        max-width: 950px;
        background-image: url("background.jpg");
    }

    h1 {
        font-family: 'Black Ops One', 'cursive';
        font-size: 65px;
        margin: 10px;
        color: #ffffff;
        text-shadow: 0px 1px 0px #999, 0px 2px 0px #888, 0px 3px 0px #777, 0px 4px 0px #666, 0px 5px 0px #555, 0px 6px 0px #444, 0px 7px 0px #333, 0px 8px 7px #001135;
    }

    p {
        font-family: 'Black Ops One', cursive;
        margin-top: 5px;
        font-size: 20px;
        color: #ffffff;
        text-shadow: 0px 1px 0px #999, 0px 2px 0px #888, 0px 3px 0px #777, 0px 4px 0px #666, 0px 5px 0px #555, 0px 6px 0px #444, 0px 7px 0px #333, 0px 8px 7px #001135;
    }

    .grid-display {
        font-family: 'Black Ops One';
        position: absolute;
        right: 800px;
        top: 180px;
        width: 350px;
        height: 350px;
        margin: 20px;
        background-color: #bbb;
    }

    input[type=number] {
        margin: 10px;
        font-size: 20px;
        font-family: monospace;
    }

    button {
        font-family: 'Black Ops One';
        margin-top: 5px;
        font-size: 20px;
        color: black;
    }

    table {
        margin-bottom: 20px;

    }

    h2 {
        font-family: sans-serif;
        margin-top: 5px;
        font-size: 18px;
        color: black;
    }
</style>
<script>
    var hitCount = 0;
    var computerHitCounter = 0;
    const ARRAYSIZE = 11;
    var myArray = [
        [1, 2, 3],
        [4, 5, 6],
        [7, 8, 9],
    ];

    const COMPUTERARRAYSIZE = 11;
    var computerArray = [
        [1, 2, 3],
        [4, 5, 6],
        [7, 8, 9],
    ];

    // creates user's array
    function createArray(size) {
        myArray = [];
        for (let rowCounter = 0; rowCounter < size; rowCounter++) {
            let row = [];
            for (let columnCounter = 0; columnCounter < size; columnCounter++) {
                row.push(0);
            }
            myArray.push(row);
        }

    }

    //displays user's grid
    function displayArray() {
        var outputString = "<TABLE border=\"1\">";
        for (let rowCounter = 0; rowCounter < myArray.length; rowCounter++) {
            outputString += "<TR>";
            for (let columnCounter = 0; columnCounter < myArray[rowCounter].length; columnCounter++) {
                let bgStyle = "style=\"color:white; background:";
                if ((myArray[rowCounter][columnCounter]) > 0) bgStyle += "green;\"";
                else bgStyle += "#ffffff00;\"";
                let id = "id=\"r" + rowCounter + "c" + columnCounter + "\"";
                outputString += "<TD width=\"30\" height=\"30\" " + bgStyle + id + "</TD>";

            }
            outputString += "</TR>";
        }
        outputString += "</TABLE>";
        document.getElementById("gameboard").innerHTML = outputString;

    }

    //creates computer's array
    function createComputerArray(size) {
        computerArray = [];
        for (let rowCounter = 0; rowCounter < size; rowCounter++) {
            let row = [];
            for (let columnCounter = 0; columnCounter < size; columnCounter++) {
                row.push(0);
            }
            computerArray.push(row);
        }

    }

    function playerPlaceShips() {
        var x = document.getElementById("x").value;
        var y = document.getElementById("y").value;
        myArray[x][y] = 1;
        myArray[x][y] = 2;
        myArray[x][y] = 3;
        myArray[x][y] = 4;
        myArray[x][y] = 5;
        displayArray();
    }
    //displays computers grid
    function displayComputerArray() {
        var computeroutputString = "<TABLE border=\"2\">";
        for (let rowCounter = 0; rowCounter < computerArray.length; rowCounter++) {
            computeroutputString += "<TR>";
            for (let columnCounter = 0; columnCounter < myArray[rowCounter].length; columnCounter++) {
                let bgStyle = "style=\"color:white; background:";
                if ((computerArray[rowCounter][columnCounter]) > 0) bgStyle += "#ffffff00;\"";
                else bgStyle += "#ffffff00;\"";
                let id = "id=\"r" + rowCounter + "c" + columnCounter + "\"";
                computeroutputString += "<TD width=\"30\" height=\"30\" " + bgStyle + id + " onClick=\"playerFire(this);\">" + "</TD>";

            }
            computeroutputString += "</TR>";
        }
        computeroutputString += "</TABLE>";
        document.getElementById("gameboard-computer").innerHTML = computeroutputString;

    }

    //Generates computer's ships
    function generateComputerShips() {
        var numberBoards = 2;
        var randomBoard = Math.floor(Math.random() * numberBoards) + 1
        if (randomBoard == 1) {
            computerArray[2][2] = 1;
            computerArray[3][2] = 1;
            computerArray[2][4] = 2;
            computerArray[3][4] = 2;
            computerArray[4][4] = 2;
            computerArray[4][6] = 3;
            computerArray[4][7] = 3;
            computerArray[4][8] = 3;
            computerArray[0][7] = 4;
            computerArray[0][8] = 4;
            computerArray[0][9] = 4;
            computerArray[0][10] = 4;
            computerArray[10][6] = 5;
            computerArray[10][7] = 5;
            computerArray[10][8] = 5;
            computerArray[10][9] = 5;
            computerArray[10][10] = 5;
        } else if (randomBoard == 2) {
            computerArray[6][2] = 1;
            computerArray[6][3] = 1;
            computerArray[0][1] = 2;
            computerArray[1][1] = 2;
            computerArray[2][1] = 2;
            computerArray[10][1] = 3;
            computerArray[10][2] = 3;
            computerArray[10][3] = 3;
            computerArray[0][10] = 4;
            computerArray[1][10] = 4;
            computerArray[2][10] = 4;
            computerArray[3][10] = 4;
            computerArray[3][6] = 5;
            computerArray[4][6] = 5;
            computerArray[5][6] = 5;
            computerArray[6][6] = 5;
            computerArray[7][6] = 5;
        }
    }

    //Allows the ability for the user to attack
    function playerFire(cell) {
        var cpos = cell.id.indexOf("c");
        var rowCounter = cell.id.substring(1, cpos);
        var columnCounter = cell.id.substring(cpos + 1);
        if (computerArray[rowCounter][columnCounter] == 0) {
            let bgStyle = "color:white; background: #bbb";
            cell.style = bgStyle;
            computerArray[rowCounter][columnCounter] = -3;

        } else if (computerArray[rowCounter][columnCounter] > 0) {
            let bgStyle = "color:white; background: red";
            cell.style = bgStyle;
            computerArray[rowCounter][columnCounter] = -2;

            hitCount++;
            if (hitCount == 17) {
                alert("All enemy battleship have been defeated! You win!");

            } else if (computerArray[rowCounter][columnCounter] > 1) {
                alert("Stop wasting your missiles! You already fired at this location.")
            }
        }
        // displayComputerArray();
        computerFire();
    }

    //Computer attacks the player
    function computerFire(x, y) {
        var x = Math.floor(Math.random() * 11);
        var y = Math.floor(Math.random() * 11);

        var cellid = "r" + x + "c" + y;
        var cell = document.getElementById(cellid);
        if (myArray[x][y] == 0) {
            let bgStyle = "color:white; background: #bbb";
            cell.style = bgStyle;
            myArray[x][y] = -3;

        } else if (myArray[x][y] > 0) {
            let bgStyle = "color:white; background: red";
            cell.style = bgStyle;
            myArray[x][y] = -2;

            computerHitCounter++;
            if (computerHitCounter == 17) {
                alert("All of your battleship have been defeated! You lose!");
            } else if (myArray[x][y] > 1) {

            }
        }
    }

    //When page is loaded, these functions are called starting the game
    function main() {
        createArray(ARRAYSIZE);
        createComputerArray(COMPUTERARRAYSIZE);
        generateComputerShips();
        displayArray();
        displayComputerArray();

    }

</script>

<body onload="main();">

    <h1>Battleship</h1>

    <p>Click the bottom board to fire at a ship. Try to sink every battleship!</p>

    <div id="gameboard" style="display: inline;" style="margin: 30px;"></div>
    <div id="gameboard-computer" style="display: inline;" style="margin: 30px;"></div>
    <div class="grid-display">
        <label for="x">Choose X Coordinate</label>
        <input type="text" id="x" name="x">
        <BR> <label for="y">Choose Y Coordinate</label>
        <input type="text" id="y" name="y">
        <BR> <button id="submit" onclick="playerPlaceShips();">Submit</button>
        <BR>
        <h2>
            Welcome to My Battleship Game<BR>
            Ships:<BR>
            Destroyer = 2 Cells <BR>
            Submarine = 3 Cells<Br>
            Cruiser = 3 Cells<BR>
            Battleship = 4 Cells<BR>
            Carrier = 5 Cells<BR>
            Grid is 11 x 11-Starting With 0<BR>
        </h2>
    </div>
    <!--TABLE border="1">
    <TR><TH>Column 1</TH><TH>Column 2</TH><TH>Column 3</TH></TR>
    <TR><TD>a</TD><TD>b</TD><TD>c</TD></TR>
    <TR><TD>d</TD><TD>e</TD><TD>f</TD></TR>
    <TR><TD>g</TD><TD>h</TD><TD>i</TD></TR>
    </TABLE-->
    <!--TABLE border="2">
        <TR><TH>Column 1</TH><TH>Column 2</TH><TH>Column 3</TH></TR>
        <TR><TD>a</TD><TD>b</TD><TD>c</TD></TR>
        <TR><TD>d</TD><TD>e</TD><TD>f</TD></TR>
        <TR><TD>g</TD><TD>h</TD><TD>i</TD></TR>
        </TABLE-->
</body>


</html>